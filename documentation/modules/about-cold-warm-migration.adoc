// Module included in the following assemblies:
//
// * documentation/doc-Planning_your_migration/assemblies/assembly_cold-warm-migration.adoc

:_mod-docs-content-type: CONCEPT
[id="about-cold-warm-migration_{context}"]

= About cold and warm migration

[role="_abstract"]
{project-short} provides two migration types: cold migration for powered-off VMs and warm migration for powered-on VMs. Cold migration works with {vmw} vSphere, {rhv-full}, {osp}, Open Virtual Appliances (OVAs) created by {vmw} vSphere, and remote {virt} clusters. Warm migration works with {vmw} vSphere and {rhv-full}.

== Cold migration

Cold migration is the default migration type. The source virtual machines are shut down while the data is copied.

Cold migration converts each VM to be compatible with {ocp-short} before transferring it. If a VM cannot be converted, the migration fails immediately (fail fast). All disk blocks are copied once in a sequential process.

[NOTE]
====
VMware only: In cold migrations, in situations in which a package manager cannot be used during the migration, {project-short} does not install the `qemu-guest-agent` daemon on the migrated VMs. This has some impact on the functionality of the migrated VMs, but overall, they are still expected to function.

To enable {project-short} to automatically install `qemu-guest-agent` on the migrated VMs, ensure that your package manager can install the daemon during the first boot of the VM after migration.

If that is not possible, use your preferred automated or manual procedure to install `qemu-guest-agent` manually.
====

== Warm migration

Warm migration copies most of the data while the source virtual machines (VMs) remain running, minimizing downtime.

The migration process has two stages:

* *Precopy stage*: Most data is copied while VMs continue running. VM disks are copied incrementally using link:https://kb.vmware.com/s/article/1020128[changed block tracking (CBT)] snapshots.
* *Cutover stage*: VMs are shut down and the remaining data is migrated. Data stored in RAM is not migrated.

Warm migration transfers snapshots to {ocp-short} first, then converts the VM during cutover. This means disk blocks may be copied multiple times if the VM has high utilization, but VMs remain available during most of the migration process.

[IMPORTANT]
====
You must enable CBT for each source VM and each VM disk before starting a warm migration.
====

[role="_additional-resources"]
.Additional resources

* xref:warm-migration-stages_{context}[Warm migration stages]
* xref:con_choosing-migration-type_{context}[Choosing a migration type]
