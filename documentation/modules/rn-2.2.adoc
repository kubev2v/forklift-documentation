// Module included in the following assemblies:
//
// * documentation/doc-Release_notes/master.adoc

[id="rn-22_{context}"]
= {project-full} 2.2

You can migrate virtual machines (VMs) from VMware vSphere or {rhv-full} to {virt} with {the-lc} {project-first}.

The release notes describe new features and enhancements, known issues, and technical changes.

[id="technical-changes-22_{context}"]
== Technical changes

.Setting interval between precopies

You can set the precopy interval.

.Handling RHV VMs with USB enabled

You can migrate an RHV VM with a host device of the USB type mapped to it, although the mapping is not supported on the target side.

[id="new-features-and-enhancements-22_{context}"]
== New features and enhancements

This release adds the following features and improvements.

.Downloading must-gather logs from the web console

You can download logs for a migration plan or a migrated VM in the {project-full} web console.

.Cloning a plan to use as a new plan

You can make a copy of an existing migration plan and use the copy as a new plan.

.Archiving a plan from the UI

You can archive a migration plan that is no longer in use. Archived plans can be viewed and duplicated but cannot be edited.

[id="known-issues-22_{context}"]
== Known issues

.QEMU guest agent is not installed on migrated VMs

The QEMU guest agent is not installed on migrated VMs. Workaround: Install the QEMU guest agent with a post-migration hook. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2018062[*BZ#2018062*])

.Missing resource causes error message in current.log file

If a resource does not exist, for example, if the `virt-launcher` pod does not exist because the migrated VM is powered off, its log is unavailable.

The following error appears in the missing resource's `current.log` file when it is downloaded from the web console or created with the `must-gather` tool: `error: expected 'logs [-f] [-p] (POD | TYPE/NAME) [-c CONTAINER]'.` (link:https://bugzilla.redhat.com/show_bug.cgi?id=2023260[*BZ#2023260*])

.Importer pod log is unavailable after warm migration

Retaining the `Importer` pod for debug purposes causes warm migration to hang during the precopy stage. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2016290[*BZ#2016290*])

As a temporary workaround, the `Importer` pod is removed at the end of the precopy stage so that the precopy succeeds. However, this means that the `Importer` pod log is not retained after warm migration is complete. You can only view the `Importer` pod log by using the `oc logs -f <cdi-importer_pod>` command during the precopy stage.

This issue only affects the `Importer` pod log and warm migration. Cold migration and the `virt-v2v` logs are not affected.

.Deleting migration plan does not remove temporary resources.

Deleting a migration plan does not remove temporary resources such as `Importer` pods, `Conversion` pods, config maps, secrets, failed VMs and data volumes. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2018974[*BZ#2018974*]) You must archive a migration plan before deleting it in order to clean up the temporary resources.

.Unclear error message for failed migration of VMs with no operation system

When migration plans for VMs with no operation system fail, the error message does not indicate the reason for the failure. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2008846[*BZ#2008846*])

.In a migration plan created from the CLI using names instead of IDs for network and storage mapping and for VMs, the mapping is shown as unavailable when the plan is opened in the {project-full} web console.

If you create a migration plan from the CLI and use names for storage and network mapping and for VMs instead of their IDs, the plan shows the mapping as unavailable when you open it in the {project-full} web console. In addition, the edit and duplicate features do not work. (link:https://bugzilla.redhat.com/show_bug.cgi?id=1986020[*BZ#1986020*])
