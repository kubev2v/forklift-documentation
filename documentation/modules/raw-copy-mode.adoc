// Module included in the following assemblies:
//
// * documentation/doc-Migrating-your-virtual-machines/assembly_troubleshooting-migration

:_mod-docs-content-type: CONCEPT
[id="raw-copy-mode_{context}"]
= Raw copy mode

[role="_abstract"]
In regular cold and warm migrations, {project-first} uses a program called `virt-v2v` to prepare virtual machines (VMs) for migration to {virt} after the VMs have been copied from their source provider.

The main function of `virt-v2v` is to  convert the disk image of a VM into a format compatible with {virt}. This program is described in detail in xref:virt-v2v-mtv_mtv[How {project-short} uses the virt-v2v tool]. What is important to note here is that although `virt-v2v` is compatible with major operating systems such as recent versions of Red Hat Enterprise Linux, Windows, and Windows Server, it is not compatible with macOS and some other operating systems.

[NOTE]
====
For a list of the operating systems that `virt-v2v` supports, see link:https://access.redhat.com/articles/1351473[Converting virtual machines from other hypervisors to KVM with virt-v2v in RHEL 7, RHEL 8, RHEL 9, and RHEL 10].
====

As a workaround for migrating VMs that use an operating system that `virt-v2v` does not support, {project-short} includes a feature called _raw copy mode_. Raw copy mode copies VMs without applying any tool to convert them for use with {virt}. The migrated VMs use emulated devices.

This enables more robust migrations, enabling a wider range of operating systems and configurations. Examples are VMs with uncommon file systems, VMs with uncommon encryption technologies or without access to keys.

However, VMs migrated using raw copy mode might not boot on {virt} or perform as well as VMs migrated in the regular way. VMs migrated using raw copy mode might not boot on {virt} or perform as well as VMs migrated in the regular way.

Therefore, using raw copy mode is a tradeoff between being a more versatile migration option compared to increasing the risk of problems following migration.

Because of this risk, users are asked to request that Red Hat support perform raw copy mode migrations.

== Device compatibility mode for raw copy migrations

When you use raw copy mode, you can configure which device types {project-short} uses for migrated VMs through the *Use compatibility mode* setting.

Compatibility devices (default)::
By default, when you enable raw copy mode, {project-short} uses compatibility devices to ensure VMs can boot on {virt}:
+
* SATA bus for disk controllers
* E1000E NICs for network interfaces
* USB controllers
+
These emulated devices work without requiring additional drivers in the guest operating system, ensuring maximum bootability for migrated VMs.

VirtIO devices::
For source VMs that already have VirtIO drivers installed, you can disable compatibility mode to use VirtIO devices instead. VirtIO devices provide better performance:
+
* VirtIO disk bus provides higher I/O throughput than SATA
* VirtIO network interface provides better network performance than E1000E
+
[IMPORTANT]
====
The *Use compatibility mode* setting only applies when you enable raw copy mode. When you disable raw copy mode (standard V2V conversion), {project-short} always uses VirtIO devices regardless of this setting.
====
+
[WARNING]
====
Before you disable compatibility mode, verify that VirtIO drivers are installed in the source VM. VMs without VirtIO drivers will not boot on {virt} if you disable compatibility mode.
====

When to disable compatibility mode::
Consider disabling compatibility mode when:
+
* Your source VMs are running modern operating systems with VirtIO drivers pre-installed, for example, recent versions of Red Hat Enterprise Linux or Windows with VirtIO drivers
* Maximum performance is required for your workload
* You have verified VirtIO driver presence in the source VM before migration

Configuring compatibility mode::
You can configure the compatibility mode setting when you create a migration plan. See xref:creating-plan-wizard-vmware_vmware[Creating a VMware vSphere migration plan by using the MTV wizard] for the procedure.