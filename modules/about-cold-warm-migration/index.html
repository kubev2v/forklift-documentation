<!DOCTYPE html>
<html lang="en-US">
  <head>

    
    <meta charset="UTF-8">
    
    <title>Forklift Documentation</title>
    <!-- # Opengraph protocol properties: https://ogp.me/ -->
    <meta name="author" content="Forklift documentation team" >
    <meta property="og:type" content="article" >
    <meta name="twitter:card" content="summary">
    <meta name="keywords" content="" >
    <meta property="og:type" content="website">
    <meta property="og:image" content="">
    <meta property="og:article:author" content="Forklift documentation team" >
    <meta property="og:article:published_time" content="2025-03-02 18:49:36 -0600" >
    <meta name="twitter:title" content="Forklift Documentation">
    <meta name="twitter:description" content="Migrating VMware virtual machines to KubeVirt">

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Forklift Documentation | Migrating VMware virtual machines to KubeVirt</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Forklift Documentation" />
<meta name="author" content="Forklift documentation team" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Migrating VMware virtual machines to KubeVirt" />
<meta property="og:description" content="Migrating VMware virtual machines to KubeVirt" />
<meta property="og:site_name" content="Forklift Documentation" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Forklift Documentation" />
<meta name="twitter:site" content="@konveyor_io" />
<meta name="twitter:creator" content="@Forklift documentation team" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Forklift documentation team"},"description":"Migrating VMware virtual machines to KubeVirt","headline":"Forklift Documentation","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/img/forklift-logo-darkbg.svg"},"name":"Forklift documentation team"},"url":"/modules/about-cold-warm-migration/"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <link rel="shortcut icon" type="image/png" href="images/favicon.png">
  </head>
  <body>
    <header class="page-header">
        
          <a href="/"><img src="/assets/img/forklift-logo-darkbg.svg" alt="Forklift Documentation" width="200" /></a><br>
        
      
        <a href="https://github.com/konveyor/forklift-documentation" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="about-cold-warm-migration_forklift">About cold and warm migration</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Forklift supports cold migration from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>VMware vSphere</p>
</li>
<li>
<p>oVirt (oVirt)</p>
</li>
<li>
<p>{osp}</p>
</li>
<li>
<p>Remote KubeVirt clusters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Forklift supports warm migration from VMware vSphere and from oVirt.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cold-migration_forklift">Cold migration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cold migration is the default migration type. The source virtual machines are shut down while the data is copied.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Unresolved directive in about-cold-warm-migration.adoc - include::snip_qemu-guest-agent.adoc[]</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="warm-migration_forklift">Warm migration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most of the data is copied during the <em>precopy</em> stage while the source virtual machines (VMs) are running.</p>
</div>
<div class="paragraph">
<p>Then the VMs are shut down and the remaining data is copied during the <em>cutover</em> stage.</p>
</div>
<div class="paragraph">
<div class="title">Precopy stage</div>
<p>The VMs are not shut down during the precopy stage.</p>
</div>
<div class="paragraph">
<p>The VM disks are copied incrementally by using <a href="https://kb.vmware.com/s/article/1020128">changed block tracking (CBT)</a> snapshots. The snapshots are created at one-hour intervals by default. You can change the snapshot interval by updating the <code>forklift-controller</code> deployment.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>You must enable CBT for each source VM and each VM disk.</p>
</div>
<div class="paragraph">
<p>A VM can support up to 28 CBT snapshots. If the source VM has too many CBT snapshots and the <code>Migration Controller</code> service is not able to create a new snapshot, warm migration might fail. The <code>Migration Controller</code> service deletes each snapshot when the snapshot is no longer required.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The precopy stage runs until the cutover stage is started manually or is scheduled to start.</p>
</div>
<div class="paragraph">
<div class="title">Cutover stage</div>
<p>The VMs are shut down during the cutover stage and the remaining data is migrated. Data stored in RAM is not migrated.</p>
</div>
<div class="paragraph">
<p>You can start the cutover stage manually by using the Forklift console or you can schedule a cutover time in the <code>Migration</code> manifest.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="warm-migration-versus-cold-migration">Advantages and disadvantages of cold and warm migrations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The table that follows offers a more detailed description of the advantages and disadvantages of cold migration and warm migration. It assumes that you have installed Red Hat Enterprise Linux (RHEL) 9 on the OKD platform on which you installed Forklift:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Advantages and disadvantages of cold and warm migrations</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"><strong>Cold migration</strong></th>
<th class="tableblock halign-left valign-top"><strong>Warm migration</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Duration</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correlates to the amount of data on the disks. Each block is copied once.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Correlates to the amount of data on the disks and VM utilization. Blocks may be copied multiple times.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Fail fast</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert and then transfer. Each VM is converted to be compatible with OKD and, if the conversion is successful, the VM is transferred. If a VM cannot be converted, the migration fails immediately.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer and then convert. For each VM, Forklift creates a snapshot and transfers it to OKD. When you start the cutover, Forklift creates the last snapshot, transfers it, and then converts the VM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tools</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>virt-v2v</code> (Red Hat Enterprise Linux 9), used to convert virtual machines from a foreign hypervisor to run on Kernel-based Virtual Machines (KVMs).</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Containerized Data Importer (CDI), a persistent storage management add-on, and <code>virt-v2v</code> (Red Hat Enterprise Linux 9)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Data transferred</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Approximate sum of all disks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Approximate sum of all disks and VM utilization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>VM downtime</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High: The VMs are shut down, and the disks are transferred.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low: Disks are transferred in the background. The VMs are shut down during the cutover stage, and the remaining data is migrated. Data stored in RAM is not migrated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Parallelism</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disks are transferred sequentially for each VM. For remote migration, disks are transferred in parallel.
<sup class="footnote" id="_footnote_footnote1">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disks are transferred in parallel by different pods.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connection use</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keeps the connection to the Source only during the disk transfer.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keeps the connection to the Source during the disk transfer, but the connection is released between snapshots.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tools</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forklift only.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forklift and CDI from KubeVirt.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The preceding table describes the situation for VMs that are running because the main benefit of warm migration is the reduced downtime, and there is no reason to initiate warm migration for VMs that are down. However, performing warm migration for VMs that are down is not the same as cold migration, even when Forklift uses <code>virt-v2v</code> and RHEL 9. For VMs that are down, Forklift transfers the disks using CDI, unlike in cold migration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>When importing from VMware, there are additional factors which impact the migration speed such as limits related to ESXi, vSphere. or VDDK.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="conclusions">Conclusions</h3>
<div class="paragraph">
<p>Based on the preceding information, we can draw the following conclusions about cold migration vs. warm migration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The shortest downtime of VMs can be achieved by using warm migration.</p>
</li>
<li>
<p>The shortest duration for VMs with a large amount of data on a single disk can be achieved by using cold migration.</p>
</li>
<li>
<p>The shortest duration for VMs with a large amount of data that is spread evenly across multiple disks can be achieved by using warm migration.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Remote migration: Target environment that does not have MTV installed. Migration to a remote environment using CDI.
</div>
</div>

      <footer class="site-footer">
        
          <span class="site-footer-owner"><p align="center"><a href="https://github.com/konveyor/forklift-documentation">forklift-documentation</a> is maintained by <a href="https://github.com/konveyor">konveyor</a>.</p></span>
        
      </footer>
    </main>
  </body>
</html>
